- name: ðŸ“ˆ ç³»ç»Ÿå¥åº·è¶‹åŠ¿çœ‹æ¿ (L4.5 Observation)
        if: always()
        run: |
          echo "### ðŸ­ å·¥åŽ‚è¿è¡Œè¶‹åŠ¿ (æœ€è¿‘ 7 æ¬¡)" >> $GITHUB_STEP_SUMMARY
          
          # æå–æœ€è¿‘è¿è¡Œçš„æŒ‡æ ‡ï¼Œä¸è¿›è¡Œé€»è¾‘åˆ¤å®šï¼Œä»…å±•ç¤º
          STATS=$(tail -n 7 run_history.jsonl | jq -s '
            {
              fallback_rate: (map(select(.fallback_used == true)) | length),
              avg_retries: (map(.retry_count) | add / length),
              unique_fingerprints: (map(.semantic_fingerprint) | unique | length)
            }')
          
          FB_COUNT=$(echo $STATS | jq '.fallback_rate')
          UNIQUE_FP=$(echo $STATS | jq '.unique_fingerprints')

          echo "| è§‚å¯Ÿç»´åº¦ | å½“å‰å€¼ | è¯„ä¼° |" >> $GITHUB_STEP_SUMMARY
          echo "| :--- | :--- | :--- |" >> $GITHUB_STEP_SUMMARY
          echo "| é™çº§é¢‘æ¬¡ (7æ—¥) | $FB_COUNT | ${FB_COUNT >= 3 && 'âš ï¸ æ³¨æ„' || 'âœ… æ­£å¸¸'} |" >> $GITHUB_STEP_SUMMARY
          echo "| è¯­ä¹‰ç¨³å®šæ€§ (3æ—¥) | $UNIQUE_FP/3 | ${UNIQUE_FP < 2 && 'âš ï¸ å¯èƒ½å­˜åœ¨å¾ªçŽ¯' || 'âœ… æ­£å¸¸'} |" >> $GITHUB_STEP_SUMMARY
          
          echo " " >> $GITHUB_STEP_SUMMARY
          echo "> ðŸ’¡ **æç¤º**: å½“å‰å¤„äºŽè§‚å¯ŸæœŸï¼Œç³»ç»Ÿä¸ä¼šè‡ªåŠ¨ç†”æ–­ã€‚è‹¥é™çº§é¢‘æ¬¡æŒç»­èµ°é«˜ï¼Œè¯·æ‰‹åŠ¨æ£€æŸ¥ API çŠ¶æ€ã€‚" >> $GITHUB_STEP_SUMMARY
